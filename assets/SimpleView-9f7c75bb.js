import{c as _,u as w}from"./options-ff2417ee.js";import{G as x,O as m,S as b,W as f,d as L,C as k,L as S,M,a as v}from"./renderer-59f25026.js";import{d as g,_ as O,o as C,c as D,a as $,b as z,u as a}from"./index-f5a9788a.js";let l,c,s=[],u=new x,r=new m,h=new b,o=new f,d=new Array;const B=g({data(){return{maxHeight:30,inTransition:!1,transitionIteration:0,transitionLength:70,stopAnimate:!1}},props:{linesCount:Number,pointsCount:Number,lineColor:String,backgroundColor:String},methods:{getData(){return!this.linesCount||!this.pointsCount?[[]]:_(this.linesCount,this.pointsCount,this.maxHeight,15,10,3,Math.random()*3+6)},onWindowResize(){let t=this.$refs.canvas.parentElement;t&&(r.updateProjectionMatrix(),o.setSize(t.clientWidth,t.clientHeight-6))},animate(){if(!this.stopAnimate&&(requestAnimationFrame(this.animate),this.transitionIteration>this.transitionLength&&(this.inTransition=!1),!(!this.linesCount||!this.pointsCount))){if(this.inTransition){this.transitionIteration++;for(let t=0;t<this.linesCount;t++)for(let e=0;e<this.pointsCount;e++)s[t][e]+=d[t][e]}else{let t=s,e=this.getData();for(let n=0;n<this.linesCount;n++)for(let i=0;i<this.pointsCount;i++){let p=e[n][i]-t[n][i];d[n][i]=p/this.transitionLength}this.transitionIteration=0,this.inTransition=!0}this.render()}},render(){L(u,s,l,c),o.render(h,r)}},mounted(){s=this.getData(),d=JSON.parse(JSON.stringify(s)),r=new m(0,s[0].length-1,s.length-1,0),r.position.z=1e3,o=new f({antialias:!0,canvas:this.$refs.canvas}),o.setPixelRatio(window.devicePixelRatio),o.useLegacyLights=!1,h.add(u),h.background=new k(this.backgroundColor),l=new S({color:this.lineColor}),c=new M({color:this.backgroundColor}),window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this.animate()},unmounted(){this.stopAnimate=!0,l.dispose(),c.dispose(),v(u)}}),N={class:"flex-grow-1 p-0 m-0"},R={ref:"canvas"};function W(t,e,n,i,p,G){return C(),D("div",N,[$("canvas",R,null,512)])}const A=O(B,[["render",W]]),P=g({__name:"SimpleView",setup(t){const e=w();return(n,i)=>(C(),z(A,{"lines-count":a(e).numOfLines,"points-count":a(e).numOfPoints,"background-color":a(e).backgroundColor,"line-color":a(e).lineColor},null,8,["lines-count","points-count","background-color","line-color"]))}});export{P as default};
