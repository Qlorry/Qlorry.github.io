import{O as u,S as y,W as f,b as g,V as S,c as p,C as v,L as x,M as T,e as b,a as B}from"./renderer-59f25026.js";import{d as w,_ as C,o as _,c as L,a,t as d,F as M,b as $}from"./index-f5a9788a.js";let m,c,r=new u,l=new y,o=new f,s=new g,h=!0;const z=w({data(){return{pointer:new S,linesCount:200,pointsCount:200,maxHeight:30,inTransition:!1,transitionIteration:0,transitionLength:70,stopAnimate:!1,changeShape:!1}},methods:{onWindowResize(){let e=this.$refs.canvas.parentElement;e&&(r.updateProjectionMatrix(),o.setSize(e.clientWidth,e.clientHeight-6))},animate(){if(!this.stopAnimate){if(requestAnimationFrame(this.animate),this.transitionIteration>this.transitionLength&&(this.inTransition=!1),this.inTransition?this.transitionIteration++:(this.transitionIteration=0,this.inTransition=!0),this.changeShape){const e=new p;e.moveTo(0,1);for(let t=0;t<300;t++)e.lineTo(t,h?300-t:t);e.lineTo(300,-1);debugger;const i=e.extractPoints(302),n=s.geometry.attributes.position;for(let t=0;t<n.count;t++)n.setXY(t,i.shape[t].x,i.shape[t].y);n.needsUpdate=!0,s.geometry.computeBoundingBox(),s.geometry.computeBoundingSphere(),s.geometry.computeVertexNormals(),s.position.z=10,this.changeShape=!1,h=!h}this.render()}},render(){o.render(l,r)}},mounted(){r=new u(0,300,300,0),r.position.z=1e3,o=new f({antialias:!0,canvas:this.$refs.canvas}),o.setPixelRatio(window.devicePixelRatio),o.useLegacyLights=!1,l.background=new v(255,255,255),m=new x({color:0}),c=new T({color:65280});{const e=new p;e.moveTo(0,1);for(let n=0;n<300;n++)e.lineTo(n,n);e.lineTo(300,-1),e.extractPoints(305);const i=new b(e);s=new g(i,c),l.add(s)}window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this.animate()},unmounted(){this.stopAnimate=!0,m.dispose(),c.dispose(),B(l)}}),R={class:"d-flex flex-row p-2 justify-content-evenly"},W={class:"flex-grow-1 p-0 m-0"},k={ref:"canvas"};function A(e,i,n,t,V,I){return _(),L(M,null,[a("div",R,[a("h4",null,d(e.pointer.x),1),a("h4",null,d(e.pointer.y),1),a("button",{type:"button",class:"btn btn-danger",onClick:i[0]||(i[0]=E=>e.changeShape=!e.changeShape)},"Change")]),a("div",W,[a("canvas",k,null,512)])],64)}const P=C(z,[["render",A]]),j=w({__name:"TestView",setup(e){return(i,n)=>(_(),$(P))}});export{j as default};
